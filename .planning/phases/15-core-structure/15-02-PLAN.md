---
phase: 15-core-structure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/app/page.tsx
  - web/src/components/fightcard/FightCardHero.tsx
  - web/src/components/fightcard/LiveBattlesStrip.tsx
  - web/src/components/fightcard/MainCardSection.tsx
  - web/src/components/fightcard/UndercardGrid.tsx
  - web/src/components/fightcard/BetweenFightsSection.tsx
  - web/src/components/fightcard/BattleCard.tsx
  - web/src/components/fightcard/EmptyState.tsx
  - web/src/components/fightcard/CountdownTimer.tsx
  - web/src/components/fightcard/index.ts
  - web/src/types/fightcard.ts
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Homepage displays hero section with main event countdown and fighter face-off"
    - "User scrolls horizontally through live battles strip below hero"
    - "Homepage shows main card with next 3 featured upcoming battles"
    - "Homepage shows undercard grid with remaining upcoming battles"
    - "Homepage shows Between Fights section with side games (Oracle, Draft, LDS, Token Wars)"
    - "Battle cards show spectator count for social proof"
    - "Live badges pulse with animation"
    - "Countdown timers appear on all upcoming battle cards"
    - "Empty state displays when no battles are live or scheduled"
  artifacts:
    - path: "web/src/components/fightcard/FightCardHero.tsx"
      provides: "Main event hero section with countdown and fighter face-off"
      min_lines: 100
      exports: ["FightCardHero"]
    - path: "web/src/components/fightcard/LiveBattlesStrip.tsx"
      provides: "Horizontal scroll strip for live battles"
      min_lines: 60
      exports: ["LiveBattlesStrip"]
    - path: "web/src/components/fightcard/MainCardSection.tsx"
      provides: "Featured upcoming battles section"
      min_lines: 40
      exports: ["MainCardSection"]
    - path: "web/src/components/fightcard/UndercardGrid.tsx"
      provides: "Grid of remaining upcoming battles"
      min_lines: 40
      exports: ["UndercardGrid"]
    - path: "web/src/components/fightcard/BetweenFightsSection.tsx"
      provides: "Side games section"
      min_lines: 50
      exports: ["BetweenFightsSection"]
    - path: "web/src/components/fightcard/BattleCard.tsx"
      provides: "Reusable battle card with spectator count, status, countdown"
      min_lines: 80
      exports: ["BattleCard"]
    - path: "web/src/components/fightcard/EmptyState.tsx"
      provides: "Empty state when no battles"
      min_lines: 30
      exports: ["EmptyState"]
  key_links:
    - from: "web/src/app/page.tsx"
      to: "web/src/components/fightcard"
      via: "import fight card components"
      pattern: "import.*fightcard"
    - from: "web/src/components/fightcard/BattleCard.tsx"
      to: "web/src/components/fightcard/CountdownTimer.tsx"
      via: "countdown display"
      pattern: "CountdownTimer"
---

<objective>
Build the fight card homepage with UFC-style hierarchy: Hero main event, live battles strip, main card, undercard, and between fights sections.

Purpose: Transform the homepage into a "UFC of crypto trading" experience where battles are the main event. Research shows fight card hierarchy (main event hero, main card featured, undercard grid) is the proven pattern for combat sports platforms.

Output: Complete homepage restructure with all fight card sections, battle cards with live badges/countdowns/spectator counts, and empty states.
</objective>

<execution_context>
@/Users/taylermelvin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/taylermelvin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/SUMMARY.md

# Existing files to understand current homepage structure
@web/src/app/page.tsx
@web/src/components/home/HeroSection.tsx
@web/src/components/home/GameGrid.tsx
@web/src/components/arena/BattleCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create fight card types and reusable components</name>
  <files>
    web/src/types/fightcard.ts
    web/src/components/fightcard/CountdownTimer.tsx
    web/src/components/fightcard/BattleCard.tsx
    web/src/components/fightcard/EmptyState.tsx
    web/src/components/fightcard/index.ts
  </files>
  <action>
Create the foundational types and reusable components for the fight card:

1. Create `web/src/types/fightcard.ts`:
   ```typescript
   export interface Fighter {
     walletAddress: string;
     displayName: string;
     avatarUrl?: string;
     elo?: number;
     record?: { wins: number; losses: number };
   }

   export interface Battle {
     id: string;
     status: 'upcoming' | 'live' | 'completed';
     fighter1: Fighter;
     fighter2: Fighter | null; // null if waiting for opponent
     stakes: number; // in SOL
     leverage: number;
     asset: string;
     startTime: number; // timestamp
     endTime?: number;
     spectatorCount: number;
     isFeatured?: boolean;
   }

   export interface SideGame {
     id: string;
     name: string;
     icon: string;
     href: string;
     description: string;
     playersActive?: number;
     currentPool?: number;
   }
   ```

2. Create `web/src/components/fightcard/CountdownTimer.tsx`:
   - 'use client' (needs useState, useEffect for countdown)
   - Props: targetTime (timestamp), onComplete callback (optional), size ('sm' | 'md' | 'lg')
   - Display format: "2h 15m" for >1hr, "15:23" for <1hr, "LIVE" if time passed
   - Use useEffect with setInterval (1 second) to update countdown
   - Clean up interval on unmount
   - Visual styling: monospace font, urgent color (text-fire) when < 5 minutes
   - Pulse animation when < 1 minute

3. Create `web/src/components/fightcard/BattleCard.tsx`:
   - Props: battle: Battle, variant: 'compact' | 'featured' | 'hero', onClick
   - Compact: Used in live strip and undercard grid (smaller, horizontal)
   - Featured: Used in main card (larger, more detail)
   - Hero: Used in hero section (biggest, most dramatic)

   Card contents:
   - Fighter face-off: Two avatars facing each other (use UserAvatar component pattern)
   - Fighter names below avatars
   - "VS" or lightning bolt between them
   - Stakes badge: "{stakes} SOL" with leverage indicator "{leverage}x"
   - Status badge:
     - "LIVE" with pulse animation (HOME-09): red badge, CSS animation
     - "Starting in {countdown}" for upcoming
     - "Completed" for finished
   - Spectator count (HOME-08): eye icon + count, only show if > 0
   - CountdownTimer for upcoming battles (HOME-10)
   - CTAs: "Watch Live" and "Bet Now" buttons for live (HOME-03)

   Styling:
   - Glass-morphism: bg-black/40 backdrop-blur border border-white/10
   - Hover state: border-rust/40, slight scale
   - Dramatic gradient overlay for hero variant
   - Responsive sizing based on variant

4. Create `web/src/components/fightcard/EmptyState.tsx`:
   - Props: type: 'no-live' | 'no-upcoming' | 'no-battles'
   - Show relevant message based on type
   - "No live battles right now" with "Check back soon" or link to upcoming schedule
   - Include link to Fight tab to start a battle: "Be the first to fight!"
   - Visual: Simple icon (crossed swords faded), muted text
   - Never feel "dead" - always show next scheduled event time if available

5. Create `web/src/components/fightcard/index.ts`:
   - Barrel exports for all fightcard components
  </action>
  <verify>
Run `cd /Users/taylermelvin/Desktop/sol-battles/web && pnpm typecheck` - should pass
  </verify>
  <done>
Fight card types defined, CountdownTimer, BattleCard, and EmptyState components exist with proper variants and features
  </done>
</task>

<task type="auto">
  <name>Task 2: Create hero and main sections</name>
  <files>
    web/src/components/fightcard/FightCardHero.tsx
    web/src/components/fightcard/LiveBattlesStrip.tsx
    web/src/components/fightcard/MainCardSection.tsx
    web/src/components/fightcard/UndercardGrid.tsx
    web/src/components/fightcard/index.ts
  </files>
  <action>
Create the main fight card sections:

1. Create `web/src/components/fightcard/FightCardHero.tsx` (HOME-01, HOME-02, HOME-03):
   - Props: mainEvent: Battle | null, onWatchLive, onBetNow
   - Full-width hero section with dramatic styling
   - If mainEvent exists:
     - Large fighter face-off display:
       - Fighter 1 avatar/name on left
       - "VS" with lightning/fire effects in center
       - Fighter 2 avatar/name on right (or "???" if waiting)
     - Stakes and leverage prominently displayed
     - Large countdown timer to start (or "LIVE NOW" badge)
     - Two CTAs: "Watch Live" (primary, goes to /spectate/{id}) and "Bet Now" (secondary)
   - If no mainEvent:
     - Show EmptyState with "no-battles" type
     - Or show upcoming schedule preview
   - Background: Dark gradient with subtle ember particles
   - Responsive: Stacks vertically on mobile, side-by-side on desktop

2. Create `web/src/components/fightcard/LiveBattlesStrip.tsx` (HOME-04):
   - Props: battles: Battle[], onBattleClick
   - Horizontal scrolling strip: `overflow-x-auto flex gap-4 snap-x snap-mandatory`
   - Hide scrollbar but allow scroll: `-webkit-scrollbar: none`
   - Each battle uses BattleCard variant="compact"
   - Scroll snap for better UX on mobile
   - If no live battles, show compact empty state or hide section entirely
   - Optional: scroll arrows on desktop for navigation
   - Section header: "LIVE NOW" with pulsing red dot

3. Create `web/src/components/fightcard/MainCardSection.tsx` (HOME-05):
   - Props: battles: Battle[] (expects 3 max)
   - Section header: "MAIN CARD - Starting Soon"
   - Display up to 3 featured upcoming battles
   - Use BattleCard variant="featured" for larger display
   - Vertical stack on mobile, horizontal on desktop
   - Each card shows countdown timer prominently
   - If fewer than 3 battles, show what's available
   - If no battles, show EmptyState type="no-upcoming"

4. Create `web/src/components/fightcard/UndercardGrid.tsx` (HOME-06):
   - Props: battles: Battle[]
   - Section header: "UNDERCARD - Upcoming"
   - Grid layout: 2 columns on mobile, 3 on tablet, 4 on desktop
   - Use BattleCard variant="compact"
   - Each card shows countdown, stakes, fighters
   - If no battles, section can be hidden (not shown at all)
   - Optional "View All" link if many battles

5. Update `web/src/components/fightcard/index.ts`:
   - Add exports for new section components
  </action>
  <verify>
Run `cd /Users/taylermelvin/Desktop/sol-battles/web && pnpm typecheck` - should pass
  </verify>
  <done>
FightCardHero, LiveBattlesStrip, MainCardSection, and UndercardGrid components exist with proper layouts and responsive design
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Between Fights section and update homepage</name>
  <files>
    web/src/components/fightcard/BetweenFightsSection.tsx
    web/src/components/fightcard/index.ts
    web/src/app/page.tsx
  </files>
  <action>
Create the Between Fights section and integrate everything into the homepage:

1. Create `web/src/components/fightcard/BetweenFightsSection.tsx` (HOME-07):
   - Props: games: SideGame[] (Oracle, Draft, LDS, Token Wars)
   - Section header: "BETWEEN FIGHTS" with subtext "Side games while you wait"
   - Grid of 4 game cards (2x2 on mobile, 4x1 on desktop)
   - Each card:
     - Game icon/logo
     - Game name
     - Brief description
     - Active players count (if available)
     - Current pool/prize (if available)
     - Click navigates to game page
   - Default games to show:
     - Oracle: /predict, "30-second price predictions"
     - Draft: /draft, "Weekly memecoin tournaments"
     - LDS: /lds, "Battle royale elimination"
     - Token Wars: /token-wars, "Head-to-head token battles"
   - Styling: Slightly muted compared to fight sections (these are secondary)

2. Update `web/src/app/page.tsx`:
   - Import all fightcard components
   - Replace current homepage structure with fight card layout:

   ```tsx
   <div className="max-w-6xl mx-auto animate-fadeIn">
     {/* Hero: Main Event */}
     <FightCardHero
       mainEvent={mainEvent}
       onWatchLive={() => router.push(`/spectate/${mainEvent?.id}`)}
       onBetNow={() => router.push(`/spectate/${mainEvent?.id}?bet=true`)}
     />

     {/* Live Now Strip */}
     {liveBattles.length > 0 && (
       <LiveBattlesStrip
         battles={liveBattles}
         onBattleClick={(battle) => router.push(`/spectate/${battle.id}`)}
       />
     )}

     {/* Main Card */}
     <MainCardSection battles={mainCardBattles} />

     {/* Undercard */}
     {undercardBattles.length > 0 && (
       <UndercardGrid battles={undercardBattles} />
     )}

     {/* Between Fights */}
     <BetweenFightsSection games={sideGames} />
   </div>
   ```

   - Create mock data for development (similar to existing MOCK_DATA pattern):
     - mainEvent: Featured live or upcoming battle
     - liveBattles: Array of currently live battles
     - mainCardBattles: Next 3 featured upcoming
     - undercardBattles: Remaining upcoming battles
     - sideGames: Static array of 4 side games

   - Wire up socket connections to get real battle data:
     - Subscribe to live battles via existing socket patterns
     - Subscribe to upcoming battles/events
     - Fall back to mock data if no real data

   - Handle empty states:
     - If no main event and no live battles, hero shows empty state
     - Main card shows empty state if no upcoming
     - Undercard hides entirely if empty
     - Between Fights always shows (side games are always available)

3. Clean up: Remove or comment out old homepage components that are no longer used:
   - Old HeroSection, FeaturedGame, GameGrid, LiveActivityFeed, SocialProof, HowItWorks
   - Keep the files but don't import them (can be removed in future cleanup)
   - Or keep some elements if they add value (e.g., live activity could be a small sidebar)
  </action>
  <verify>
Run build: `cd /Users/taylermelvin/Desktop/sol-battles/web && pnpm build` - should succeed
Then manually verify at localhost:3000 that homepage shows fight card layout
  </verify>
  <done>
Homepage displays complete fight card hierarchy: Hero with main event, live strip, main card, undercard, and between fights section. Empty states shown when appropriate.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. TypeScript check: `cd /Users/taylermelvin/Desktop/sol-battles/web && pnpm typecheck`
2. Build check: `cd /Users/taylermelvin/Desktop/sol-battles/web && pnpm build`
3. Visual verification (manual at localhost:3000):
   - Hero section visible with main event or empty state
   - Live battles strip scrolls horizontally
   - Main card shows up to 3 featured battles
   - Undercard grid shows remaining battles
   - Between Fights section shows 4 side games
   - LIVE badges pulse with animation
   - Countdown timers tick down
   - Spectator counts visible on cards
   - Empty states display appropriately when no data
</verification>

<success_criteria>
- [ ] Hero section displays with main event countdown and fighter face-off (HOME-01, HOME-02)
- [ ] "Watch Live" and "Bet Now" CTAs present in hero (HOME-03)
- [ ] Live battles strip scrolls horizontally below hero (HOME-04)
- [ ] Main card section shows next 3 featured upcoming battles (HOME-05)
- [ ] Undercard grid shows remaining upcoming battles (HOME-06)
- [ ] Between Fights section shows Oracle, Draft, LDS, Token Wars (HOME-07)
- [ ] Spectator count displayed on battle cards (HOME-08)
- [ ] LIVE status badges pulse with animation (HOME-09)
- [ ] Countdown timers on all upcoming battle cards (HOME-10)
- [ ] Empty state design when no battles live or scheduled (HOME-11)
- [ ] Build and typecheck pass
</success_criteria>

<output>
After completion, create `.planning/phases/15-core-structure/15-02-SUMMARY.md`
</output>
