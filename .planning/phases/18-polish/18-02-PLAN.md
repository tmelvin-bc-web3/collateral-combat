---
phase: 18-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/components/watch/QuickBetStripV2.tsx
  - web/src/components/watch/BetConfirmOverlay.tsx
  - web/src/components/watch/BattleFeed.tsx
  - web/tailwind.config.ts
autonomous: true

must_haves:
  truths:
    - "Buttons respond with scale-down on press (active:scale-95)"
    - "Disabled buttons show grayed out colors but maintain shape"
    - "Swipe between battles has smooth CSS transition"
    - "All interactive elements have 44px minimum touch targets"
  artifacts:
    - path: "web/src/components/watch/QuickBetStripV2.tsx"
      provides: "Bet buttons with press animations"
      contains: "active:scale-95"
    - path: "web/src/components/watch/BetConfirmOverlay.tsx"
      provides: "Confirm/cancel buttons with press animations"
      contains: "active:scale-95"
    - path: "web/tailwind.config.ts"
      provides: "Button press keyframe animation"
      contains: "buttonPress"
  key_links:
    - from: "web/src/components/watch/QuickBetStripV2.tsx"
      to: "Tailwind animation utilities"
      via: "active:scale-95 class"
      pattern: "active:scale-95"
---

<objective>
Add micro-interactions to buttons and smooth swipe animations

Purpose: Make interactions feel responsive and polished (POL-04, POL-05)
Output: Button press animations, disabled state styling, and smooth battle swipe transitions
</objective>

<execution_context>
@/Users/taylermelvin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/taylermelvin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-polish/18-RESEARCH.md

# Files to modify
@web/src/components/watch/QuickBetStripV2.tsx
@web/src/components/watch/BetConfirmOverlay.tsx
@web/src/components/watch/BattleFeed.tsx
@web/tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add button press animations to QuickBetStripV2</name>
  <files>
    web/src/components/watch/QuickBetStripV2.tsx
  </files>
  <action>
Add micro-interactions to the preset amount buttons:

1. Add to each amount button the following classes:
   - `active:scale-95` - shrink on press (iOS-like)
   - `transition-transform duration-150` - smooth 150ms transition
   - Keep existing `touch-manipulation` for preventing zoom

2. Update the disabled state styling:
   - Change from `opacity-50 cursor-not-allowed` to:
   - `disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed`
   - The `scale-100` ensures disabled buttons don't animate on press

3. Current button classes look like:
```tsx
className={cn(
  'flex-1 max-w-[72px] py-2 rounded-lg text-sm font-bold transition-all touch-manipulation',
  selectedAmount === amt && (state === 'amount_selected' || state === 'idle')
    ? 'bg-warning text-black ring-2 ring-warning/50'
    : 'bg-white/10 text-white/70 active:bg-white/20',
  state === 'placing' && 'opacity-50 cursor-not-allowed'
)}
```

4. Update to:
```tsx
className={cn(
  'flex-1 max-w-[72px] py-2 rounded-lg text-sm font-bold touch-manipulation',
  'transition-transform duration-150 active:scale-95',
  selectedAmount === amt && (state === 'amount_selected' || state === 'idle')
    ? 'bg-warning text-black ring-2 ring-warning/50'
    : 'bg-white/10 text-white/70 hover:bg-white/20',
  state === 'placing' && 'opacity-50 cursor-not-allowed scale-100'
)}
```

Note: Changed `active:bg-white/20` to `hover:bg-white/20` since active is now used for scale
  </action>
  <verify>
Build passes: `cd web && pnpm build`
Grep for active:scale: `grep -r "active:scale-95" web/src/components/watch/QuickBetStripV2.tsx`
  </verify>
  <done>
Amount buttons have press animation (active:scale-95) and proper disabled styling
  </done>
</task>

<task type="auto">
  <name>Task 2: Add button press animations to BetConfirmOverlay</name>
  <files>
    web/src/components/watch/BetConfirmOverlay.tsx
  </files>
  <action>
First, read BetConfirmOverlay.tsx to understand current button structure.

Add micro-interactions to Confirm and Cancel buttons:

1. For both buttons, add:
   - `active:scale-95` - shrink on press
   - `transition-transform duration-150` - smooth transition

2. Confirm button specific:
   - Keep existing bg-warning styling
   - Add `disabled:scale-100` for when placing bet (isPlacing prop)

3. Cancel button specific:
   - Keep existing bg-white/10 styling
   - Make sure it has same animation treatment

4. Pattern to apply:
```tsx
// Cancel button
className={cn(
  'min-h-[44px] flex-1 py-3 rounded-lg font-bold text-sm',
  'bg-white/10 text-white/60 hover:bg-white/20',
  'transition-transform duration-150 active:scale-95'
)}

// Confirm button
className={cn(
  'min-h-[44px] flex-1 py-3 rounded-lg font-bold text-sm',
  'bg-warning text-black hover:bg-warning/90',
  'transition-transform duration-150 active:scale-95',
  isPlacing && 'opacity-50 cursor-not-allowed scale-100'
)}
```
  </action>
  <verify>
Build passes: `cd web && pnpm build`
Grep: `grep -r "active:scale-95" web/src/components/watch/BetConfirmOverlay.tsx`
  </verify>
  <done>
Confirm and Cancel buttons have press animations
  </done>
</task>

<task type="auto">
  <name>Task 3: Enhance BattleFeed swipe animations</name>
  <files>
    web/src/components/watch/BattleFeed.tsx
    web/tailwind.config.ts
  </files>
  <action>
Improve the swipe transition smoothness between battles:

**BattleFeed.tsx:**
1. The container already has `scroll-snap-type: y mandatory` via `snap-y snap-mandatory`
2. Add scroll-behavior smooth to container (already present via style prop)
3. Verify scroll-snap-align on battle slides

4. Add a subtle scale effect on non-active slides:
   - Active slide: full opacity and scale
   - Non-active slides: slightly dimmed

5. Update the battle slide rendering:
```tsx
<div
  key={battle.id}
  data-battle-id={battle.id}
  className={cn(
    'snap-start snap-always transition-all duration-300',
    index !== activeIndex && 'opacity-80 scale-[0.98]'
  )}
>
```

**tailwind.config.ts:**
Add a custom buttonPress keyframe for reusable button animations:

In keyframes section, add:
```typescript
buttonPress: {
  '0%, 100%': { transform: 'scale(1)' },
  '50%': { transform: 'scale(0.95)' },
},
```

In animation section, add:
```typescript
buttonPress: 'buttonPress 150ms ease-out',
```

This provides an alternative to `active:scale-95` for programmatic triggering if needed.
  </action>
  <verify>
Build passes: `cd web && pnpm build`
Grep for keyframes: `grep -A2 "buttonPress" web/tailwind.config.ts`
  </verify>
  <done>
Swipe animations are smooth with subtle scale on non-active slides, and buttonPress keyframe is available
  </done>
</task>

</tasks>

<verification>
1. `cd web && pnpm build` - TypeScript compiles without errors
2. `grep -r "active:scale-95" web/src/components/watch/` - should find in QuickBetStripV2 and BetConfirmOverlay
3. `grep "buttonPress" web/tailwind.config.ts` - keyframe animation exists
</verification>

<success_criteria>
- Amount buttons shrink to 95% scale on press with 150ms transition
- Confirm/Cancel buttons have same press animation
- Disabled buttons show muted colors but don't animate
- Battle slide transitions have smooth scroll-snap behavior
- buttonPress keyframe animation available in Tailwind config
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/18-polish/18-02-SUMMARY.md`
</output>
