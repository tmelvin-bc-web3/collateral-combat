---
phase: 13-fighter-identity
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/components/profile/EloTierBadge.tsx
  - web/src/components/profile/RecentFormIndicator.tsx
  - web/src/components/profile/index.ts
autonomous: true

must_haves:
  truths:
    - "EloTierBadge displays tier icon/color based on ELO rating"
    - "EloTierBadge shows 'protected' tier for new fighters"
    - "RecentFormIndicator shows last 5 battle results as W/L indicators"
  artifacts:
    - path: "web/src/components/profile/EloTierBadge.tsx"
      provides: "Tier badge with color and icon"
      min_lines: 40
    - path: "web/src/components/profile/RecentFormIndicator.tsx"
      provides: "Last 5 battles W/L/T display"
      min_lines: 30
  key_links:
    - from: "web/src/components/profile/EloTierBadge.tsx"
      to: "Tailwind tier colors"
      via: "tierColors record"
      pattern: "tierColors\\["
---

<objective>
Create EloTierBadge and RecentFormIndicator components for fighter profiles

Purpose: Visual components for PROF-02 (ELO tier badge) and PROF-07 (recent form indicator)
Output: Two reusable React components in web/src/components/profile/
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-fighter-identity/13-RESEARCH.md

@web/src/app/profile/[wallet]/opengraph-image.tsx
@web/src/components/progression/LevelBadge.tsx
@web/src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EloTierBadge component</name>
  <files>web/src/components/profile/EloTierBadge.tsx</files>
  <action>
Create EloTierBadge component with the following:

```typescript
'use client';

import { cn } from '@/lib/utils';

export type EloTier = 'bronze' | 'silver' | 'gold' | 'platinum' | 'diamond' | 'protected';

interface EloTierBadgeProps {
  tier: EloTier;
  elo?: number;
  size?: 'sm' | 'md' | 'lg';
  showElo?: boolean;
  className?: string;
}

// Use tier colors from existing opengraph-image.tsx
const tierColors: Record<EloTier, { bg: string; text: string; border: string; glow: string }> = {
  bronze: {
    bg: 'bg-amber-900/20',
    text: 'text-amber-600',
    border: 'border-amber-600/30',
    glow: 'shadow-amber-600/20'
  },
  silver: {
    bg: 'bg-slate-300/20',
    text: 'text-slate-300',
    border: 'border-slate-300/30',
    glow: 'shadow-slate-300/20'
  },
  gold: {
    bg: 'bg-yellow-400/20',
    text: 'text-yellow-400',
    border: 'border-yellow-400/30',
    glow: 'shadow-yellow-400/20'
  },
  platinum: {
    bg: 'bg-cyan-200/20',
    text: 'text-cyan-200',
    border: 'border-cyan-200/30',
    glow: 'shadow-cyan-200/20'
  },
  diamond: {
    bg: 'bg-sky-300/20',
    text: 'text-sky-300',
    border: 'border-sky-300/30',
    glow: 'shadow-sky-300/20'
  },
  protected: {
    bg: 'bg-stone-500/20',
    text: 'text-stone-400',
    border: 'border-stone-400/30',
    glow: 'shadow-stone-400/20'
  },
};

// Size classes
const sizeClasses = {
  sm: 'px-2 py-0.5 text-xs',
  md: 'px-3 py-1 text-sm',
  lg: 'px-4 py-1.5 text-base',
};

export function EloTierBadge({ tier, elo, size = 'md', showElo = false, className }: EloTierBadgeProps) {
  const colors = tierColors[tier];

  return (
    <div
      className={cn(
        'inline-flex items-center gap-1.5 rounded-full border font-bold uppercase tracking-wider',
        colors.bg,
        colors.text,
        colors.border,
        `shadow-lg ${colors.glow}`,
        sizeClasses[size],
        className
      )}
    >
      {/* Tier icon - diamond shape for all tiers */}
      <svg className="w-3 h-3" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2L2 12l10 10 10-10L12 2z" />
      </svg>

      <span>{tier === 'protected' ? 'NEW' : tier.toUpperCase()}</span>

      {showElo && elo !== undefined && (
        <span className="opacity-70 font-mono text-[0.9em]">{elo}</span>
      )}
    </div>
  );
}
```

Component should:
- Accept tier, elo, size, showElo props
- Use tier-specific colors matching existing opengraph-image.tsx
- Show "NEW" for protected tier (new fighters)
- Optionally display ELO number
- Support sm/md/lg sizes
  </action>
  <verify>
  - File exists at web/src/components/profile/EloTierBadge.tsx
  - TypeScript compiles: `cd web && pnpm typecheck`
  </verify>
  <done>EloTierBadge component renders tier badge with correct colors and optional ELO display</done>
</task>

<task type="auto">
  <name>Task 2: Create RecentFormIndicator component</name>
  <files>web/src/components/profile/RecentFormIndicator.tsx</files>
  <action>
Create RecentFormIndicator component:

```typescript
'use client';

import { cn } from '@/lib/utils';

interface RecentFormResult {
  result: 'win' | 'loss' | 'tie';
  pnlPercent?: number;
  endedAt?: number;
}

interface RecentFormIndicatorProps {
  form: RecentFormResult[];
  maxItems?: number;
  size?: 'sm' | 'md';
  showLabels?: boolean;
  className?: string;
}

// Follows pattern from research: /web/src/components/lds/RecentWinners.tsx
export function RecentFormIndicator({
  form,
  maxItems = 5,
  size = 'md',
  showLabels = false,
  className
}: RecentFormIndicatorProps) {
  const displayForm = form.slice(0, maxItems);

  // Pad with empty slots if less than maxItems
  const paddedForm = [
    ...displayForm,
    ...Array(Math.max(0, maxItems - displayForm.length)).fill(null)
  ];

  const sizeClasses = {
    sm: 'w-5 h-5 text-[10px]',
    md: 'w-6 h-6 text-xs',
  };

  const resultConfig = {
    win: {
      bg: 'bg-success/20',
      text: 'text-success',
      border: 'border-success/30',
      label: 'W',
    },
    loss: {
      bg: 'bg-danger/20',
      text: 'text-danger',
      border: 'border-danger/30',
      label: 'L',
    },
    tie: {
      bg: 'bg-warning/20',
      text: 'text-warning',
      border: 'border-warning/30',
      label: 'T',
    },
  };

  return (
    <div className={cn('flex items-center gap-1', className)}>
      {showLabels && (
        <span className="text-xs text-text-tertiary mr-1 uppercase tracking-wider">Form</span>
      )}
      {paddedForm.map((battle, i) => {
        if (!battle) {
          // Empty slot
          return (
            <div
              key={`empty-${i}`}
              className={cn(
                'rounded-full bg-bg-tertiary border border-border-primary flex items-center justify-center opacity-30',
                sizeClasses[size]
              )}
            >
              <span className="text-text-tertiary">-</span>
            </div>
          );
        }

        const config = resultConfig[battle.result];
        return (
          <div
            key={i}
            className={cn(
              'rounded-full flex items-center justify-center font-bold border',
              config.bg,
              config.text,
              config.border,
              sizeClasses[size]
            )}
            title={battle.pnlPercent !== undefined ? `${battle.pnlPercent.toFixed(1)}% PnL` : undefined}
          >
            {config.label}
          </div>
        );
      })}
    </div>
  );
}
```

Component should:
- Display last N battle results as W/L/T indicators
- Show empty slots if less than maxItems battles
- Support sm/md sizes
- Show PnL in tooltip on hover
- Use success/danger/warning colors from theme
  </action>
  <verify>
  - File exists at web/src/components/profile/RecentFormIndicator.tsx
  - TypeScript compiles: `cd web && pnpm typecheck`
  </verify>
  <done>RecentFormIndicator shows last 5 battles as W/L/T circles with proper colors</done>
</task>

<task type="auto">
  <name>Task 3: Create barrel export file</name>
  <files>web/src/components/profile/index.ts</files>
  <action>
Create barrel export file for profile components:

```typescript
export { EloTierBadge } from './EloTierBadge';
export type { EloTier } from './EloTierBadge';
export { RecentFormIndicator } from './RecentFormIndicator';
```

This allows importing as:
```typescript
import { EloTierBadge, RecentFormIndicator } from '@/components/profile';
```
  </action>
  <verify>
  - File exists at web/src/components/profile/index.ts
  - `cd web && pnpm typecheck` passes
  </verify>
  <done>Barrel export file created for easy imports</done>
</task>

</tasks>

<verification>
1. Both components exist in web/src/components/profile/
2. TypeScript compiles: `cd web && pnpm typecheck`
3. Barrel export allows importing from @/components/profile
</verification>

<success_criteria>
- EloTierBadge component shows tier-specific badge with colors matching design system
- RecentFormIndicator shows last 5 battles as W/L/T indicators
- Components are typed correctly and exported via barrel file
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/13-fighter-identity/13-02-SUMMARY.md`
</output>
