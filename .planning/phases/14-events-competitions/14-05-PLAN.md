---
phase: 14-events-competitions
plan: 05
type: execute
wave: 2
depends_on: ["14-04"]
files_modified:
  - web/package.json
  - web/src/components/tournament/BracketViewer.tsx
  - web/src/components/tournament/TournamentLobby.tsx
  - web/src/components/tournament/MatchCard.tsx
  - web/src/app/tournament/[id]/page.tsx
  - web/src/hooks/useTournament.ts
autonomous: true

must_haves:
  truths:
    - "Bracket visualization shows single elimination bracket"
    - "Bracket displays player progression through rounds"
    - "Matches show status (pending, in_progress, completed)"
    - "Winners highlighted as bracket advances"
  artifacts:
    - path: "web/src/components/tournament/BracketViewer.tsx"
      provides: "Bracket visualization component"
      exports: ["BracketViewer"]
    - path: "web/src/app/tournament/[id]/page.tsx"
      provides: "Tournament detail page"
      min_lines: 50
    - path: "web/src/hooks/useTournament.ts"
      provides: "Tournament data hook"
      exports: ["useTournament", "useTournaments"]
  key_links:
    - from: "web/src/components/tournament/BracketViewer.tsx"
      to: "@g-loot/react-tournament-brackets"
      via: "library import"
      pattern: "SingleEliminationBracket"
    - from: "web/src/app/tournament/[id]/page.tsx"
      to: "web/src/hooks/useTournament.ts"
      via: "hook consumption"
      pattern: "useTournament\\("
---

<objective>
Build the tournament bracket visualization UI using @g-loot/react-tournament-brackets.

Purpose: Display bracket progression with visual clarity (TOUR-04).

Output: Tournament page at /tournament/[id] with interactive bracket view.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-events-competitions/14-RESEARCH.md
@.planning/phases/14-events-competitions/14-04-SUMMARY.md

Key patterns from research:
- @g-loot/react-tournament-brackets for bracket rendering
- Wasteland theme colors for customization
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Bracket Library and Create Hook</name>
  <files>web/package.json, web/src/hooks/useTournament.ts</files>
  <action>
1. Install the bracket visualization library with pinned versions:
```bash
cd web && pnpm add @g-loot/react-tournament-brackets@^2.1.0 styled-components@^6.1.0
```

Note: styled-components is a peer dependency for the bracket library theming.
Version ^2.1.0 for react-tournament-brackets ensures API compatibility with SingleEliminationBracket.
Version ^6.1.0 for styled-components ensures React 18+ compatibility.

2. Create useTournament.ts hook:
```typescript
'use client';

import { useState, useEffect, useCallback } from 'react';
import { socket } from '@/lib/socket';

export interface Tournament {
  id: string;
  name: string;
  format: 'single_elimination';
  size: 8 | 16;
  entryFeeLamports: number;
  scheduledStartTime: number;
  registrationOpens: number;
  registrationCloses: number;
  status: 'upcoming' | 'registration_open' | 'in_progress' | 'completed' | 'cancelled';
  prizePoolLamports: number;
  createdAt: number;
}

export interface TournamentMatch {
  id: string;
  tournamentId: string;
  round: number;
  position: number;
  player1Wallet: string | null;
  player2Wallet: string | null;
  winnerWallet: string | null;
  battleId: string | null;
  scheduledTime: number | null;
  status: 'pending' | 'ready' | 'in_progress' | 'completed';
}

export function useTournaments() {
  const [tournaments, setTournaments] = useState<Tournament[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchTournaments = useCallback(async () => {
    try {
      const res = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/api/tournaments`);
      if (!res.ok) throw new Error('Failed to fetch tournaments');
      const data = await res.json();
      setTournaments(data.tournaments || []);
      setError(null);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchTournaments();
  }, [fetchTournaments]);

  return { tournaments, loading, error, refetch: fetchTournaments };
}

export function useTournament(tournamentId: string) {
  const [tournament, setTournament] = useState<Tournament | null>(null);
  const [matches, setMatches] = useState<TournamentMatch[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!tournamentId) return;

    const fetchTournament = async () => {
      try {
        const res = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/api/tournaments/${tournamentId}`);
        if (!res.ok) throw new Error('Tournament not found');
        const data = await res.json();
        setTournament(data.tournament);
        setMatches(data.matches || []);
        setError(null);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Unknown error');
      } finally {
        setLoading(false);
      }
    };

    fetchTournament();

    // Join tournament room for updates
    socket.emit('join_tournament_room', tournamentId);

    socket.on('tournament_update', (event) => {
      if (event.tournamentId === tournamentId) {
        // Handle different event types
        switch (event.type) {
          case 'bracket_generated':
          case 'match_ready':
          case 'match_completed':
            // Refresh matches
            setMatches(event.data.matches || event.data);
            break;
          case 'tournament_completed':
            setTournament(prev => prev ? { ...prev, status: 'completed' } : null);
            break;
        }
      }
    });

    return () => {
      socket.emit('leave_tournament_room', tournamentId);
      socket.off('tournament_update');
    };
  }, [tournamentId]);

  const register = useCallback(async (wallet: string) => {
    const res = await fetch(
      `${process.env.NEXT_PUBLIC_BACKEND_URL}/api/tournaments/${tournamentId}/register`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ wallet })
      }
    );
    if (!res.ok) {
      const data = await res.json();
      throw new Error(data.error || 'Registration failed');
    }
    return res.json();
  }, [tournamentId]);

  return { tournament, matches, loading, error, register };
}
```
  </action>
  <verify>Dependencies installed: `cd web && pnpm list @g-loot/react-tournament-brackets`</verify>
  <done>Bracket library installed, useTournament hook created</done>
</task>

<task type="auto">
  <name>Task 2: Create Bracket Visualization Components</name>
  <files>web/src/components/tournament/BracketViewer.tsx, web/src/components/tournament/MatchCard.tsx</files>
  <action>
Create tournament visualization components:

1. Create web/src/components/tournament/MatchCard.tsx:
```typescript
'use client';

import { TournamentMatch } from '@/hooks/useTournament';

interface MatchCardProps {
  match: TournamentMatch;
  roundName: string;
  onWatch?: () => void;
}

export function MatchCard({ match, roundName, onWatch }: MatchCardProps) {
  const formatWallet = (wallet: string | null) =>
    wallet ? wallet.slice(0, 4) + '...' + wallet.slice(-4) : 'TBD';

  const getStatusBadge = () => {
    switch (match.status) {
      case 'in_progress':
        return <span className="bg-success text-black text-xs px-2 py-0.5 rounded font-bold">LIVE</span>;
      case 'completed':
        return <span className="bg-white/20 text-white/60 text-xs px-2 py-0.5 rounded">Complete</span>;
      case 'ready':
        return <span className="bg-warning text-black text-xs px-2 py-0.5 rounded">Ready</span>;
      default:
        return <span className="bg-white/10 text-white/50 text-xs px-2 py-0.5 rounded">Pending</span>;
    }
  };

  const isWinner = (wallet: string | null) => wallet && wallet === match.winnerWallet;

  return (
    <div className="bg-black/60 border border-white/10 rounded-lg p-3 min-w-[200px]">
      <div className="flex justify-between items-center mb-2">
        <span className="text-white/50 text-xs">{roundName}</span>
        {getStatusBadge()}
      </div>

      <div className="space-y-2">
        <div className={`flex items-center justify-between p-2 rounded ${
          isWinner(match.player1Wallet) ? 'bg-success/20 border border-success/30' : 'bg-white/5'
        }`}>
          <span className={`font-mono ${isWinner(match.player1Wallet) ? 'text-success font-bold' : 'text-white'}`}>
            {formatWallet(match.player1Wallet)}
          </span>
          {isWinner(match.player1Wallet) && <span className="text-success">W</span>}
        </div>

        <div className="text-center text-white/30 text-xs">VS</div>

        <div className={`flex items-center justify-between p-2 rounded ${
          isWinner(match.player2Wallet) ? 'bg-success/20 border border-success/30' : 'bg-white/5'
        }`}>
          <span className={`font-mono ${isWinner(match.player2Wallet) ? 'text-success font-bold' : 'text-white'}`}>
            {formatWallet(match.player2Wallet)}
          </span>
          {isWinner(match.player2Wallet) && <span className="text-success">W</span>}
        </div>
      </div>

      {match.status === 'in_progress' && match.battleId && (
        <button
          onClick={onWatch}
          className="w-full mt-2 py-1.5 bg-warning text-black rounded text-sm font-medium hover:bg-warning/80"
        >
          Watch Live
        </button>
      )}
    </div>
  );
}
```

2. Create web/src/components/tournament/BracketViewer.tsx:
```typescript
'use client';

import { useMemo } from 'react';
import {
  SingleEliminationBracket,
  Match,
  SVGViewer,
  createTheme,
} from '@g-loot/react-tournament-brackets';
import { TournamentMatch, Tournament } from '@/hooks/useTournament';

interface BracketViewerProps {
  tournament: Tournament;
  matches: TournamentMatch[];
  onMatchClick?: (matchId: string) => void;
}

// Wasteland theme for bracket
const wastelandTheme = createTheme({
  textColor: { main: '#FFFFFF', highlighted: '#ff5500', dark: '#888888' },
  matchBackground: { wonColor: '#1a1a1a', lostColor: '#0d0d0d' },
  score: {
    background: { wonColor: '#ff5500', lostColor: '#333333' },
    text: { highlightedWonColor: '#000000', highlightedLostColor: '#ffffff' }
  },
  border: { color: '#333333', highlightedColor: '#ff5500' },
  roundHeader: { backgroundColor: '#111111', fontColor: '#ffffff' },
  connectorColor: '#333333',
  connectorColorHighlight: '#ff5500',
  svgBackground: '#080705',
});

const ROUND_NAMES: Record<number, Record<number, string>> = {
  8: { 1: 'Quarterfinals', 2: 'Semifinals', 3: 'Final' },
  16: { 1: 'Round of 16', 2: 'Quarterfinals', 3: 'Semifinals', 4: 'Final' }
};

export function BracketViewer({ tournament, matches, onMatchClick }: BracketViewerProps) {
  // Transform matches to library format
  const bracketMatches = useMemo(() => {
    const totalRounds = Math.log2(tournament.size);

    return matches.map(match => {
      const roundName = ROUND_NAMES[tournament.size][match.round] || `Round ${match.round}`;

      return {
        id: match.id,
        name: roundName,
        nextMatchId: match.round < totalRounds
          ? matches.find(m => m.round === match.round + 1 && m.position === Math.floor(match.position / 2))?.id
          : null,
        tournamentRoundText: roundName,
        startTime: match.scheduledTime ? new Date(match.scheduledTime).toISOString() : '',
        state: match.status === 'completed' ? 'DONE' :
               match.status === 'in_progress' ? 'RUNNING' :
               match.status === 'ready' ? 'SCHEDULED' : 'NO_PARTY',
        participants: [
          {
            id: match.player1Wallet || 'tbd-1',
            name: match.player1Wallet
              ? match.player1Wallet.slice(0, 4) + '...' + match.player1Wallet.slice(-4)
              : 'TBD',
            isWinner: match.winnerWallet === match.player1Wallet,
            status: match.winnerWallet === match.player1Wallet ? 'PLAYED' :
                   match.status === 'completed' ? 'PLAYED' : null,
            resultText: match.winnerWallet === match.player1Wallet ? 'W' :
                       match.status === 'completed' && match.player1Wallet ? 'L' : null,
          },
          {
            id: match.player2Wallet || 'tbd-2',
            name: match.player2Wallet
              ? match.player2Wallet.slice(0, 4) + '...' + match.player2Wallet.slice(-4)
              : 'TBD',
            isWinner: match.winnerWallet === match.player2Wallet,
            status: match.winnerWallet === match.player2Wallet ? 'PLAYED' :
                   match.status === 'completed' ? 'PLAYED' : null,
            resultText: match.winnerWallet === match.player2Wallet ? 'W' :
                       match.status === 'completed' && match.player2Wallet ? 'L' : null,
          },
        ],
      };
    });
  }, [matches, tournament.size]);

  if (matches.length === 0) {
    return (
      <div className="flex items-center justify-center h-64 text-white/50">
        Bracket will be generated when tournament starts
      </div>
    );
  }

  return (
    <div className="w-full overflow-x-auto">
      <div className="min-w-[800px]">
        <SingleEliminationBracket
          matches={bracketMatches as any}
          matchComponent={({ match, ...rest }) => (
            <Match
              match={match}
              {...rest}
              onMatchClick={() => onMatchClick?.(match.id)}
            />
          )}
          theme={wastelandTheme}
          options={{
            style: {
              roundHeader: {
                backgroundColor: '#111111',
                fontColor: '#ffffff',
              },
              connectorColor: '#333333',
              connectorColorHighlight: '#ff5500',
            },
          }}
          svgWrapper={({ children, ...props }) => (
            <SVGViewer
              width={800}
              height={tournament.size === 8 ? 400 : 600}
              background="#080705"
              SVGBackground="#080705"
              {...props}
            >
              {children}
            </SVGViewer>
          )}
        />
      </div>
    </div>
  );
}
```
  </action>
  <verify>TypeScript compiles: `cd web && pnpm typecheck`</verify>
  <done>BracketViewer and MatchCard components created</done>
</task>

<task type="auto">
  <name>Task 3: Create Tournament Pages</name>
  <files>web/src/components/tournament/TournamentLobby.tsx, web/src/app/tournament/[id]/page.tsx, web/src/app/tournaments/page.tsx</files>
  <action>
Create tournament lobby component and pages:

1. Create web/src/components/tournament/TournamentLobby.tsx:
```typescript
'use client';

import { useState } from 'react';
import { useWallet } from '@solana/wallet-adapter-react';
import { Tournament } from '@/hooks/useTournament';
import { EventCountdown } from '@/components/events/EventCountdown';

interface TournamentLobbyProps {
  tournament: Tournament;
  registeredCount: number;
  isRegistered: boolean;
  onRegister: () => Promise<void>;
}

export function TournamentLobby({
  tournament,
  registeredCount,
  isRegistered,
  onRegister
}: TournamentLobbyProps) {
  const { connected } = useWallet();
  const [registering, setRegistering] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handleRegister = async () => {
    setRegistering(true);
    setError(null);
    try {
      await onRegister();
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Registration failed');
    } finally {
      setRegistering(false);
    }
  };

  const entryFeeSol = (tournament.entryFeeLamports / 1e9).toFixed(2);
  const prizePoolSol = (tournament.prizePoolLamports / 1e9).toFixed(2);
  const spotsRemaining = tournament.size - registeredCount;

  return (
    <div className="bg-black/40 backdrop-blur border border-white/10 rounded-lg p-6">
      <div className="flex justify-between items-start mb-6">
        <div>
          <h2 className="text-2xl font-bold text-white">{tournament.name}</h2>
          <p className="text-white/60 mt-1">
            {tournament.size}-player single elimination
          </p>
        </div>
        <div className="text-right">
          {tournament.status === 'upcoming' || tournament.status === 'registration_open' ? (
            <>
              <p className="text-white/50 text-sm mb-1">Starts in</p>
              <EventCountdown targetTime={tournament.scheduledStartTime} size="lg" />
            </>
          ) : tournament.status === 'in_progress' ? (
            <span className="bg-success text-black px-3 py-1 rounded font-bold">LIVE</span>
          ) : (
            <span className="bg-white/20 text-white/60 px-3 py-1 rounded">Completed</span>
          )}
        </div>
      </div>

      <div className="grid grid-cols-3 gap-4 mb-6">
        <div className="bg-white/5 rounded p-4 text-center">
          <p className="text-white/50 text-sm">Entry Fee</p>
          <p className="text-xl font-bold text-white">{entryFeeSol} SOL</p>
        </div>
        <div className="bg-white/5 rounded p-4 text-center">
          <p className="text-white/50 text-sm">Prize Pool</p>
          <p className="text-xl font-bold text-warning">{prizePoolSol} SOL</p>
        </div>
        <div className="bg-white/5 rounded p-4 text-center">
          <p className="text-white/50 text-sm">Spots</p>
          <p className="text-xl font-bold text-white">
            {registeredCount}/{tournament.size}
          </p>
        </div>
      </div>

      {/* Progress bar */}
      <div className="mb-6">
        <div className="h-2 bg-white/10 rounded-full overflow-hidden">
          <div
            className="h-full bg-warning transition-all duration-300"
            style={{ width: `${(registeredCount / tournament.size) * 100}%` }}
          />
        </div>
        <p className="text-white/50 text-sm mt-2 text-center">
          {spotsRemaining} spot{spotsRemaining !== 1 ? 's' : ''} remaining
        </p>
      </div>

      {/* Registration button */}
      {tournament.status === 'registration_open' && (
        <div>
          {error && (
            <p className="text-danger text-sm mb-3 text-center">{error}</p>
          )}

          {!connected ? (
            <p className="text-white/50 text-center py-3">
              Connect wallet to register
            </p>
          ) : isRegistered ? (
            <div className="bg-success/20 border border-success/30 rounded p-3 text-center">
              <p className="text-success font-medium">You are registered!</p>
              <p className="text-white/50 text-sm mt-1">
                Be ready when the tournament starts
              </p>
            </div>
          ) : spotsRemaining === 0 ? (
            <p className="text-white/50 text-center py-3">Tournament is full</p>
          ) : (
            <button
              onClick={handleRegister}
              disabled={registering}
              className="w-full py-3 bg-warning text-black font-bold rounded hover:bg-warning/80 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {registering ? 'Registering...' : `Register (${entryFeeSol} SOL)`}
            </button>
          )}
        </div>
      )}

      {tournament.status === 'upcoming' && (
        <p className="text-white/50 text-center py-3">
          Registration opens {new Date(tournament.registrationOpens).toLocaleString()}
        </p>
      )}
    </div>
  );
}
```

2. Create web/src/app/tournament/[id]/page.tsx:
```typescript
'use client';

import { useParams, useRouter } from 'next/navigation';
import { useWallet } from '@solana/wallet-adapter-react';
import { useTournament } from '@/hooks/useTournament';
import { TournamentLobby } from '@/components/tournament/TournamentLobby';
import { BracketViewer } from '@/components/tournament/BracketViewer';

export default function TournamentPage() {
  const params = useParams();
  const router = useRouter();
  const { publicKey } = useWallet();
  const tournamentId = params.id as string;

  const { tournament, matches, loading, error, register } = useTournament(tournamentId);

  if (loading) {
    return (
      <main className="min-h-screen bg-primary flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-t-2 border-warning"></div>
      </main>
    );
  }

  if (error || !tournament) {
    return (
      <main className="min-h-screen bg-primary flex flex-col items-center justify-center">
        <p className="text-danger mb-4">{error || 'Tournament not found'}</p>
        <button
          onClick={() => router.push('/tournaments')}
          className="text-warning hover:underline"
        >
          Back to Tournaments
        </button>
      </main>
    );
  }

  const handleRegister = async () => {
    if (!publicKey) throw new Error('Wallet not connected');
    await register(publicKey.toBase58());
  };

  const handleMatchClick = (matchId: string) => {
    const match = matches.find(m => m.id === matchId);
    if (match?.battleId) {
      router.push(`/battle/${match.battleId}`);
    }
  };

  // Count registered players from matches (first round has all players)
  const registeredCount = matches.filter(m => m.round === 1).length * 2;

  // Check if current user is registered
  const isRegistered = publicKey && matches.some(m =>
    m.player1Wallet === publicKey.toBase58() || m.player2Wallet === publicKey.toBase58()
  );

  return (
    <main className="min-h-screen bg-primary">
      <div className="max-w-6xl mx-auto px-4 py-8">
        {/* Back link */}
        <button
          onClick={() => router.push('/tournaments')}
          className="text-white/50 hover:text-white mb-6 flex items-center gap-2"
        >
          <span>&larr;</span> All Tournaments
        </button>

        {/* Lobby (before tournament starts) */}
        {(tournament.status === 'upcoming' || tournament.status === 'registration_open') && (
          <TournamentLobby
            tournament={tournament}
            registeredCount={registeredCount}
            isRegistered={!!isRegistered}
            onRegister={handleRegister}
          />
        )}

        {/* Bracket (after tournament starts) */}
        {(tournament.status === 'in_progress' || tournament.status === 'completed') && (
          <div className="bg-black/40 backdrop-blur border border-white/10 rounded-lg p-6">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-2xl font-bold text-white">{tournament.name}</h2>
              {tournament.status === 'in_progress' ? (
                <span className="bg-success text-black px-3 py-1 rounded font-bold">LIVE</span>
              ) : (
                <span className="bg-white/20 text-white/60 px-3 py-1 rounded">Completed</span>
              )}
            </div>

            <BracketViewer
              tournament={tournament}
              matches={matches}
              onMatchClick={handleMatchClick}
            />
          </div>
        )}
      </div>
    </main>
  );
}
```

3. Create web/src/app/tournaments/page.tsx:
```typescript
'use client';

import Link from 'next/link';
import { useTournaments } from '@/hooks/useTournament';
import { EventCountdown } from '@/components/events/EventCountdown';

export default function TournamentsPage() {
  const { tournaments, loading, error, refetch } = useTournaments();

  return (
    <main className="min-h-screen bg-primary">
      <div className="max-w-4xl mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-white mb-2">Tournaments</h1>
          <p className="text-white/60">
            Compete in single-elimination bracket tournaments for prize pools
          </p>
        </div>

        {loading ? (
          <div className="flex justify-center py-12">
            <div className="animate-spin rounded-full h-8 w-8 border-t-2 border-warning"></div>
          </div>
        ) : error ? (
          <div className="text-center py-12">
            <p className="text-danger mb-4">{error}</p>
            <button onClick={() => refetch()} className="text-warning hover:underline">
              Try again
            </button>
          </div>
        ) : tournaments.length === 0 ? (
          <div className="text-center py-12 text-white/50">
            <p className="text-lg">No tournaments scheduled</p>
            <p className="text-sm mt-2">Check back soon!</p>
          </div>
        ) : (
          <div className="space-y-4">
            {tournaments.map(tournament => (
              <Link
                key={tournament.id}
                href={`/tournament/${tournament.id}`}
                className="block bg-black/40 backdrop-blur border border-white/10 rounded-lg p-4 hover:border-warning/50 transition-colors"
              >
                <div className="flex justify-between items-center">
                  <div>
                    <h3 className="text-lg font-bold text-white">{tournament.name}</h3>
                    <p className="text-white/60 text-sm">
                      {tournament.size} players | {(tournament.entryFeeLamports / 1e9).toFixed(2)} SOL entry
                    </p>
                  </div>
                  <div className="text-right">
                    {tournament.status === 'in_progress' ? (
                      <span className="bg-success text-black px-2 py-1 rounded text-sm font-bold">LIVE</span>
                    ) : (
                      <EventCountdown targetTime={tournament.scheduledStartTime} size="sm" />
                    )}
                  </div>
                </div>
                <div className="mt-3 flex justify-between text-sm">
                  <span className="text-white/50">
                    Prize pool: <span className="text-warning">{(tournament.prizePoolLamports / 1e9).toFixed(2)} SOL</span>
                  </span>
                  <span className={tournament.status === 'registration_open' ? 'text-success' : 'text-white/50'}>
                    {tournament.status === 'registration_open' ? 'Registration Open' : tournament.status}
                  </span>
                </div>
              </Link>
            ))}
          </div>
        )}
      </div>
    </main>
  );
}
```
  </action>
  <verify>Pages build: `cd web && pnpm build`</verify>
  <done>Tournament pages and bracket viewer work correctly</done>
</task>

</tasks>

<verification>
1. Frontend compiles: `cd web && pnpm typecheck`
2. Frontend builds: `cd web && pnpm build`
3. Tournaments list renders at /tournaments
4. Tournament detail page shows bracket at /tournament/[id]
5. Bracket displays correctly for 8 and 16 player tournaments
6. Winner highlighting works in completed matches
</verification>

<success_criteria>
- Bracket visualizes all rounds correctly
- Players shown in correct positions based on seeding
- Winners highlighted with distinct styling
- Live matches show "Watch" button linking to battle
- Responsive layout works on mobile (horizontal scroll for bracket)
</success_criteria>

<output>
After completion, create `.planning/phases/14-events-competitions/14-05-SUMMARY.md`
</output>
