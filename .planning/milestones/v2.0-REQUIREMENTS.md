# Requirements Archive: v2.0 Battles System

**Archived:** 2026-01-24
**Status:** SHIPPED

This is the archived requirements specification for v2.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Sol-Battles v2.0 Battles System

**Defined:** 2026-01-23
**Core Value:** Players can confidently bet against each other on price predictions with fair, transparent, on-chain settlement.
**Milestone Goal:** Build the UFC of Crypto Trading — live 1v1 leveraged battles with spectator betting

## v2.0 Requirements

Requirements for the Battles System milestone. Each maps to roadmap phases.

### Matchmaking

- [x] **MATCH-01**: User can join matchmaking queue with stake amount
- [x] **MATCH-02**: User can create open challenge visible to other users
- [x] **MATCH-03**: User can direct challenge a specific wallet
- [x] **MATCH-04**: System matches users by ELO tier (within +/- range)
- [x] **MATCH-05**: New players get protected queue for first 10 battles

### Battle Execution

- [x] **EXEC-01**: Real-time PnL tracking updates every price tick
- [x] **EXEC-02**: User can select leverage (2x, 5x, 10x, 20x)
- [x] **EXEC-03**: User can open/close positions during battle
- [x] **EXEC-04**: Liquidation triggers instant battle loss
- [x] **EXEC-05**: PnL delta bar shows who's currently ahead
- [x] **EXEC-06**: Liquidation distance indicator shows margin remaining

### Settlement

- [x] **SETTLE-01**: Winner automatically determined at battle end
- [x] **SETTLE-02**: Instant on-chain payout (no claiming step)
- [x] **SETTLE-03**: Battle history logged for profiles and stats
- [x] **SETTLE-04**: Tie handling when price unchanged

### Spectator Viewer

- [x] **VIEW-01**: Live battle display shows both fighters' positions
- [x] **VIEW-02**: Real-time PnL delta visualization (tug-of-war)
- [x] **VIEW-03**: Liquidation distance indicators for both fighters
- [x] **VIEW-04**: Price chart overlay during battle
- [x] **VIEW-05**: Mobile-responsive battle viewer layout

### Spectator Betting

- [x] **BET-01**: User can pick a fighter to back during battle
- [x] **BET-02**: Live odds update in real-time during battle
- [x] **BET-03**: Quick bet strip for one-tap betting
- [x] **BET-04**: Auto-accept small odds changes (<5%)
- [x] **BET-05**: Pool visualization shows A vs B betting split
- [x] **BET-06**: Instant payout to spectators on battle end

### Live Chat

- [x] **CHAT-01**: Battle-specific chat room for spectators
- [x] **CHAT-02**: Emoji reactions for key moments
- [x] **CHAT-03**: Rate limiting for spam protection
- [x] **CHAT-04**: Wallet-gating (must be connected to chat)
- [x] **CHAT-05**: Basic moderation (mute/ban)

### Social Sharing

- [x] **SHARE-01**: One-click share to Twitter/X
- [x] **SHARE-02**: Auto-generated battle result graphics
- [ ] **SHARE-03**: Battle clip/highlight generation — DEFERRED to v2.1
- [x] **SHARE-04**: Fighter profile share cards

### Fighter Profiles

- [x] **PROF-01**: Win/loss record displayed
- [x] **PROF-02**: ELO ranking with tier badge
- [x] **PROF-03**: Win streak and best streak tracking
- [x] **PROF-04**: ROI percentage calculation
- [x] **PROF-05**: Trading style stats (aggression, avg leverage)
- [x] **PROF-06**: Favorite asset tracking
- [x] **PROF-07**: Recent form indicator (last 5 battles)
- [x] **PROF-08**: Profile comparison view (vs another fighter)

### Fight Cards (Scheduled Events)

- [x] **EVENT-01**: Main card structure with featured battles
- [x] **EVENT-02**: Countdown timers for upcoming events
- [x] **EVENT-03**: Notifications when events start
- [x] **EVENT-04**: Event creation admin flow
- [x] **EVENT-05**: Event calendar/schedule view

### Tournament Mode

- [x] **TOUR-01**: Bracket system (single elimination)
- [x] **TOUR-02**: Support 8-16 player tournaments
- [x] **TOUR-03**: Prize pool calculated from entries
- [x] **TOUR-04**: Bracket visualization with progression
- [x] **TOUR-05**: Tournament leaderboard
- [x] **TOUR-06**: Scheduled tournament times

## Future Requirements

Deferred to later milestones. Tracked but not in current roadmap.

### v2.1 Enhancements

- **ADV-01**: Double elimination tournament format
- **ADV-02**: Swiss format for large tournaments
- **ADV-03**: Copy betting (follow successful bettors)
- **ADV-04**: Clan/team competitions
- **ADV-05**: Seasonal championships
- **ADV-06**: Professional broadcast overlay mode
- **ADV-07**: Multi-battle view for tournaments
- **ADV-08**: Commentary integration

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| House betting / liquidity pools | Undermines core PvP value prop |
| Partial liquidation mechanics | Adds complexity, instant loss is cleaner |
| Double/Swiss elimination | Focus on single elimination for v2.0 |
| Clone trading / auto-follow | Deferred to v2.1 |
| Team vs team battles | Deferred to v2.1 |
| Mobile native app | Web-first, mobile responsive is sufficient |

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| MATCH-01 | Phase 10 | Complete |
| MATCH-02 | Phase 10 | Complete |
| MATCH-03 | Phase 10 | Complete |
| MATCH-04 | Phase 10 | Complete |
| MATCH-05 | Phase 10 | Complete |
| EXEC-01 | Phase 10 | Complete |
| EXEC-02 | Phase 10 | Complete |
| EXEC-03 | Phase 10 | Complete |
| EXEC-04 | Phase 10 | Complete |
| EXEC-05 | Phase 10 | Complete |
| EXEC-06 | Phase 10 | Complete |
| SETTLE-01 | Phase 10 | Complete |
| SETTLE-02 | Phase 10 | Complete |
| SETTLE-03 | Phase 10 | Complete |
| SETTLE-04 | Phase 10 | Complete |
| VIEW-01 | Phase 11 | Complete |
| VIEW-02 | Phase 11 | Complete |
| VIEW-03 | Phase 11 | Complete |
| VIEW-04 | Phase 11 | Complete |
| VIEW-05 | Phase 11 | Complete |
| BET-01 | Phase 11 | Complete |
| BET-02 | Phase 11 | Complete |
| BET-03 | Phase 11 | Complete |
| BET-04 | Phase 11 | Complete |
| BET-05 | Phase 11 | Complete |
| BET-06 | Phase 11 | Complete |
| CHAT-01 | Phase 12 | Complete |
| CHAT-02 | Phase 12 | Complete |
| CHAT-03 | Phase 12 | Complete |
| CHAT-04 | Phase 12 | Complete |
| CHAT-05 | Phase 12 | Complete |
| SHARE-01 | Phase 12 | Complete |
| SHARE-02 | Phase 12 | Complete |
| SHARE-03 | Phase 12 | Deferred |
| SHARE-04 | Phase 12 | Complete |
| PROF-01 | Phase 13 | Complete |
| PROF-02 | Phase 13 | Complete |
| PROF-03 | Phase 13 | Complete |
| PROF-04 | Phase 13 | Complete |
| PROF-05 | Phase 13 | Complete |
| PROF-06 | Phase 13 | Complete |
| PROF-07 | Phase 13 | Complete |
| PROF-08 | Phase 13 | Complete |
| EVENT-01 | Phase 14 | Complete |
| EVENT-02 | Phase 14 | Complete |
| EVENT-03 | Phase 14 | Complete |
| EVENT-04 | Phase 14 | Complete |
| EVENT-05 | Phase 14 | Complete |
| TOUR-01 | Phase 14 | Complete |
| TOUR-02 | Phase 14 | Complete |
| TOUR-03 | Phase 14 | Complete |
| TOUR-04 | Phase 14 | Complete |
| TOUR-05 | Phase 14 | Complete |
| TOUR-06 | Phase 14 | Complete |

**Coverage:**
- v2.0 requirements: 54 total
- Shipped: 53
- Deferred: 1 (SHARE-03)
- Coverage rate: 98.1%

---

## Milestone Summary

**Shipped:** 53 of 54 v2.0 requirements

**Adjusted:** None — all requirements implemented as specified

**Dropped:**
- SHARE-03 (Battle clip/highlight generation) — Deferred to v2.1. Static image sharing prioritized for immediate value; video generation requires additional infrastructure.

---
*Archived: 2026-01-24 as part of v2.0 milestone completion*
